<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø¨Ø±Ù‚ | Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ…ÙŠØ² âš¡</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root { --main-blue: #0057FF; --main-orange: #FF6B00; }
        body { font-family: 'Cairo', sans-serif; background: #fcfdfe; scroll-behavior: smooth; overflow-x: hidden; }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø®Ø· Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ø§Ù„Ù†Ø´Ø· */
        .nav-link { position: relative; transition: 0.3s; }
        .nav-link.active { color: var(--main-blue); }
        .nav-link.active::after {
            content: "";
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 3px;
            background: var(--main-orange);
            border-radius: 10px;
        }

        /* ÙƒØ±ÙˆØª Ø§Ù„Ù…Ø·Ø§Ø¹Ù… */
        .res-card {
            background: white; border-radius: 28px; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(0, 0, 0, 0.03); position: relative; cursor: pointer; overflow: hidden;
        }
        .res-card:hover { transform: translateY(-12px); box-shadow: 0 30px 60px rgba(0, 87, 255, 0.12); }
        
        .image-box { position: relative; height: 200px; border-radius: 24px; overflow: hidden; margin: 8px; }
        .image-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.6s; }
        .res-card:hover .image-box img { transform: scale(1.1); }

        .glass-tag {
            position: absolute; top: 12px; right: 12px; background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px); padding: 6px 14px; border-radius: 15px;
            font-size: 11px; font-weight: 800; color: var(--main-blue); z-index: 10;
        }

        /* Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        #side-cart {
            position: fixed; top: 0; left: 0; bottom: 0; width: 360px; 
            background: white; z-index: 2000; transform: translateX(-100%);
            transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 15px 0 40px rgba(0,0,0,0.1);
            display: flex; flex-direction: column;
        }
        #side-cart.open { transform: translateX(0); }
        .cart-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.4); 
            z-index: 1999; display: none; backdrop-filter: blur(4px);
        }
        .cart-overlay.active { display: block; }

        .order-btn {
            background: linear-gradient(135deg, var(--main-blue), #003db3);
            color: white; padding: 10px 20px; border-radius: 14px; font-weight: 700;
        }
    </style>
</head>
<body>

    <nav class="fixed top-0 left-0 right-0 bg-white/90 backdrop-blur-md z-[1000] py-4 px-[6%] border-b border-gray-100 shadow-sm">
        <div class="max-w-77xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer" onclick="location.href='index.html'">
                <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg rotate-3">
                    <i class="fas fa-bolt text-white"></i>
                </div>
                <span class="text-xl font-black text-gray-900 tracking-tighter italic">Ø§Ù„Ù€Ø¨Ù€Ø±Ù‚ Ù„Ù„ØªÙˆØµÙŠÙ„</span>
            </div>

            <ul class="hidden md:flex items-center gap-8 font-bold text-gray-600">
                <li><a href="index.html" class="nav-link hover:text-blue-600 transition-colors">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="restaurants.html" class="nav-link active text-blue-600">Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</a></li>
                <li><a href="offers.html" class="nav-link hover:text-blue-600 transition-colors">Ø§Ù„Ø¹Ø±ÙˆØ¶</a></li>
                <li><a href="about.html" class="nav-link hover:text-blue-600 transition-colors">Ø¹Ù† Ø§Ù„Ø¨Ø±Ù‚</a></li>
            </ul>

            <div class="flex items-center gap-3">
                <button onclick="toggleCart()" class="relative w-11 h-11 bg-gray-50 rounded-full flex items-center justify-center text-gray-700 border border-gray-100">
                    <i class="fas fa-shopping-basket text-lg"></i>
                    <span id="cart-badge" class="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center border-2 border-white font-bold">0</span>
                </button>
                <a href="admin.html" class="w-11 h-11 bg-gray-900 rounded-full flex items-center justify-center text-white shadow-md"><i class="fas fa-user-shield text-sm"></i></a>
            </div>
        </div>
    </nav>
    
    <header class="text-center mt-32 mb-12 px-[6%]">
        <h1 class="text-4xl font-black text-gray-900 mb-6 tracking-tight">Ø§ÙƒØªØ´Ù Ù…Ø·Ø§Ø¹Ù… <span class="text-blue-600 italic">ØµÙ†Ø¹Ø§Ø¡</span></h1>
        <div class="bg-white border border-gray-100 shadow-xl p-2 flex items-center max-w-xl mx-auto rounded-2xl transition-all focus-within:ring-2 focus-within:ring-blue-500/20">
            <i class="fas fa-search text-gray-400 mx-4"></i>
            <input type="text" id="searchInput" onkeyup="searchFun()" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø·Ø¹Ù… Ø£Ùˆ ÙˆØ¬Ø¨Ø©..." class="w-full bg-transparent outline-none font-bold text-gray-700 py-2">
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-[6%] mb-20">
        <div id="restaurants-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
    </main>

    <footer class="bg-gray-900 text-white py-12 px-[6%] mt-20 text-right">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-10">
            <div>
                <div class="flex items-center gap-2 mb-4">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center rotate-3"><i class="fas fa-bolt text-white text-sm"></i></div>
                    <span class="text-xl font-black tracking-tighter italic text-blue-500">Ø§Ù„Ù€Ø¨Ù€Ø±Ù‚ Ù„Ù„ØªÙˆØµÙŠÙ„</span>
                </div>
                <p class="text-gray-400 text-sm font-bold leading-relaxed">Ø£Ø³Ø±Ø¹ Ø®Ø¯Ù…Ø© ØªÙˆØµÙŠÙ„ ÙˆØ¬Ø¨Ø§Øª ÙÙŠ ØµÙ†Ø¹Ø§Ø¡. Ù†Ø¶Ù…Ù† Ù„Ùƒ Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„Ø³Ø±Ø¹Ø© ÙÙŠ ÙƒÙ„ Ø·Ù„Ø¨.</p>
            </div>
            <div>
                <h4 class="font-black mb-4 text-blue-500 border-b border-gray-800 pb-2">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h4>
                <p class="text-gray-400 text-sm font-bold mb-2"><i class="fas fa-headset ml-2"></i> Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡: 781110052</p>
                <p class="text-gray-400 text-sm font-bold"><i class="fas fa-user-tie ml-2 text-blue-500"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø±Ù‚: 772111598</p>
            </div>
            <div>
                <h4 class="font-black mb-4 text-blue-500 border-b border-gray-800 pb-2">Ø±ÙˆØ§Ø¨Ø· Ù‡Ø§Ù…Ø©</h4>
                <ul class="text-gray-400 text-sm space-y-2 font-bold">
                    <li><a href="index.html" class="hover:text-blue-500">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                    <li><a href="admin.html" class="hover:text-blue-500">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>
    <aside id="side-cart">
        <div class="p-6 border-b flex justify-between items-center bg-gray-50">
            <h2 class="text-xl font-black text-gray-900 italic">Ø³Ù„Ø© Ø·Ù„Ø¨Ø§ØªÙƒ ğŸ§º</h2>
            <button onclick="toggleCart()" class="text-gray-400 text-3xl">&times;</button>
        </div>
        <div id="cart-content" class="flex-1 overflow-y-auto p-5"></div>
        <div class="p-6 border-t bg-white">
            <div class="flex justify-between text-xl font-black text-blue-600 mb-6">
                <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span> <span id="final-total">0 Ø±.ÙŠ</span>
            </div>
            <a href="cart.html" class="w-full bg-gray-900 text-white py-4 rounded-2xl font-black flex items-center justify-center gap-3 hover:bg-blue-600 transition-all shadow-lg">
                <i class="fas fa-shopping-cart"></i> Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„Ø¯ÙØ¹
            </a>
        </div>
    </aside>

    <script src="script.js"></script>

    <script>
        function loadData() {
            // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠØ¯ÙˆÙŠØ© ÙˆØ§Ù„Ø¢Ù„ÙŠØ©
            const base = typeof defaultRestaurants !== 'undefined' ? defaultRestaurants : [];
            const admin = JSON.parse(localStorage.getItem('barq_restaurants')) || [];
            const allRestaurants = [...admin, ...base];
            render(allRestaurants);
            updateBadge();
        }

        function render(list) {
            const grid = document.getElementById('restaurants-grid');
            if(list.length === 0) {
                grid.innerHTML = `<p class="col-span-full text-center text-gray-400 font-bold py-10">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù…</p>`;
                return;
            }

            grid.innerHTML = list.map((res, i) => `
                <div class="res-card" onclick="openMenu('${res.id}', '${res.name}')">
                    <div class="image-box">
                        <div class="glass-tag">${res.badge || 'ØªÙˆØµÙŠÙ„ Ù…ØªØ§Ø­'}</div>
                        <img src="${res.image || res.img || 'https://via.placeholder.com/400x250'}" alt="${res.name}">
                    </div>
                    <div class="p-6 text-right">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="text-xl font-black text-gray-800">${res.name}</h3>
                            <span class="text-orange-500 font-bold text-sm"><i class="fas fa-star"></i> 4.9</span>
                        </div>
                        <p class="text-gray-400 text-sm mb-6"><i class="fas fa-map-marker-alt text-blue-500 ml-1"></i> ${res.address || 'ØµÙ†Ø¹Ø§Ø¡'}</p>
                        <div class="flex justify-between items-center border-t pt-4">
                            <div class="text-xs font-bold text-gray-600"><i class="fas fa-clock text-blue-600 ml-1"></i> 30 Ø¯Ù‚ÙŠÙ‚Ø©</div>
                            <button class="order-btn text-xs">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ÙŠÙˆ <i class="fas fa-chevron-left mr-1"></i></button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function searchFun() {
            const term = document.getElementById('searchInput').value.toLowerCase();
            const base = typeof defaultRestaurants !== 'undefined' ? defaultRestaurants : [];
            const admin = JSON.parse(localStorage.getItem('barq_restaurants')) || [];
            const combined = [...admin, ...base];
            const filtered = combined.filter(r => r.name.toLowerCase().includes(term));
            render(filtered);
        }

        function openMenu(id, name) {
            localStorage.setItem('selectedRestaurantId', id);
            localStorage.setItem('selectedRestaurantName', name);
            window.location.href = 'menu.html';
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø³Ù„Ø©
        function toggleCart() {
            document.getElementById('side-cart').classList.toggle('open');
            document.getElementById('cartOverlay').classList.toggle('active');
            renderCartUI();
        }

        function renderCartUI() {
            const cart = JSON.parse(localStorage.getItem('barq_cart')) || [];
            const container = document.getElementById('cart-content');
            let total = 0;
            if(cart.length === 0) {
                container.innerHTML = `<p class="text-center text-gray-400 font-bold mt-10">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>`;
            } else {
                container.innerHTML = cart.map((item, idx) => {
                    total += (item.price * item.qty);
                    return `<div class="bg-gray-50 p-3 rounded-xl mb-2 flex justify-between items-center border">
                        <div class="text-right">
                            <p class="text-sm font-black">${item.name}</p>
                            <p class="text-xs text-blue-600 font-bold">${item.price} Ø±.ÙŠ</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="changeQty(${idx}, 1)" class="text-blue-600 font-bold">+</button>
                            <span class="font-bold">${item.qty}</span>
                            <button onclick="changeQty(${idx}, -1)" class="text-red-500 font-bold">-</button>
                        </div>
                    </div>`;
                }).join('');
            }
            document.getElementById('final-total').innerText = total + ' Ø±.ÙŠ';
        }

        function changeQty(idx, delta) {
            let cart = JSON.parse(localStorage.getItem('barq_cart')) || [];
            cart[idx].qty += delta;
            if(cart[idx].qty <= 0) cart.splice(idx, 1);
            localStorage.setItem('barq_cart', JSON.stringify(cart));
            renderCartUI();
            updateBadge();
        }

        function updateBadge() {
            const cart = JSON.parse(localStorage.getItem('barq_cart')) || [];
            document.getElementById('cart-badge').innerText = cart.reduce((s, i) => s + i.qty, 0);
        }

        window.onload = loadData;
    </script>
</body>
</html>